(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e5c0e18"],{3873:function(e,t,s){"use strict";s("b4dc")},5206:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-register"},[s("div",{staticClass:"contain"},[s("div",{staticClass:"big-box",class:{active:e.isLogin}},[e.isLogin?s("div",{staticClass:"big-contain"},[s("div",{staticClass:"btitle"},[e._v("账户登录")]),s("div",{staticClass:"bform"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.useremail,expression:"form.useremail"}],attrs:{type:"email",placeholder:"邮箱"},domProps:{value:e.form.useremail},on:{input:function(t){t.target.composing||e.$set(e.form,"useremail",t.target.value)}}}),e.emailError?s("span",{staticClass:"errTips"},[e._v("* 邮箱填写错误 *")]):e._e(),s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.userpwd,expression:"form.userpwd"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:e.form.userpwd},on:{input:function(t){t.target.composing||e.$set(e.form,"userpwd",t.target.value)}}}),e.passwordError?s("span",{staticClass:"errTips"},[e._v("* 密码填写错误 *")]):e._e()]),s("button",{staticClass:"bbutton",on:{click:e.login}},[e._v("登录")])]):s("div",{staticClass:"big-contain"},[s("div",{staticClass:"btitle"},[e._v("创建账户")]),s("div",{staticClass:"bform"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.username,expression:"form.username"}],attrs:{type:"text",placeholder:"用户名"},domProps:{value:e.form.username},on:{input:function(t){t.target.composing||e.$set(e.form,"username",t.target.value)}}}),e.existed?s("span",{staticClass:"errTips"},[e._v("* 用户名已经存在！ *")]):e._e(),s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.useremail,expression:"form.useremail"}],attrs:{type:"email",placeholder:"邮箱"},domProps:{value:e.form.useremail},on:{input:[function(t){t.target.composing||e.$set(e.form,"useremail",t.target.value)},e.checkEmail]}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.userpwd,expression:"form.userpwd"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:e.form.userpwd},on:{input:function(t){t.target.composing||e.$set(e.form,"userpwd",t.target.value)}}})]),s("button",{staticClass:"bbutton",on:{click:e.register}},[e._v("注册")])])]),s("div",{staticClass:"small-box",class:{active:e.isLogin}},[e.isLogin?s("div",{staticClass:"small-contain"},[s("div",{staticClass:"stitle"},[e._v("你好，世界!")]),s("p",{staticClass:"scontent"}),s("button",{staticClass:"sbutton",on:{click:e.changeType}},[e._v("我还没号")])]):s("div",{staticClass:"small-contain"},[s("div",{staticClass:"stitle"},[e._v("新世界大门")]),s("p",{staticClass:"scontent"}),s("button",{staticClass:"sbutton",on:{click:e.changeType}},[e._v("我有号了")])])])])])},a=[],o={name:"login-register",data:function(){return{isLogin:!1,emailError:!1,passwordError:!1,existed:!1,form:{username:"",useremail:"",userpwd:""}}},created:function(){this.loggingState()},destroyed:function(){this.loggingState()},methods:{loggingState:function(){this.$store.commit("SET_LOGGING_STATE")},changeType:function(){this.isLogin=!this.isLogin,this.form.username="",this.form.useremail="",this.form.userpwd=""},login:function(){var e=this,t=this;""!==t.form.useremail&&""!==t.form.userpwd?t.$axios({method:"post",url:"api/login_register/login/",data:{uid:t.form.useremail,pwd:t.form.userpwd}}).then((function(t){switch(t.data.data){case 1:e.$Notice.open({title:"成功登录"}),localStorage.setItem("token","Bearer "+t.data.token),e.$store.commit("setUser",t.data.user),e.$router.push({path:"/"});break;case-1:e.$Notice.open({title:"用户名或密码错误"});break}})).catch((function(e){console.log(e)})):alert("填写不能为空！")},register:function(){var e=this,t=this;""!==t.form.username&&""!==t.form.useremail&&""!==t.form.userpwd?t.$axios({method:"post",url:"/api/login_register/{uid}/register/",data:{uid:t.form.username,mail:t.form.useremail,pwd:t.form.userpwd}}).then((function(t){switch(t.data){case 1:e.$Notice.open({title:"成功注册！"}),e.login();break;case-1:e.existed=!0;break}})).catch((function(e){console.log(e)})):alert("填写不能为空！")}}},r=o,n=(s("3873"),s("0c7c")),l=Object(n["a"])(r,i,a,!1,null,"cf690760",null);t["default"]=l.exports},b4dc:function(e,t,s){}}]);
//# sourceMappingURL=chunk-7e5c0e18.18ce4157.js.map