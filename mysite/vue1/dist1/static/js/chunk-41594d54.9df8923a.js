(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41594d54"],{"04c3":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"personal-center-wrap"},[s("div",{staticClass:"header-wrap"},[s("el-card",{staticClass:"header",staticStyle:{width:"80%","background-size":"cover"},style:{backgroundImage:"url("+t.bg+")"}},[s("img",{attrs:{src:t.websiteInfo.avatar,alt:"头像"},on:{click:function(e){t.picture.dialogVisible=!0}}}),s("div",{staticStyle:{display:"flex"}},[s("div",{staticClass:"username"},[t._v(t._s(t.websiteInfo.username))]),t.$store.state.websiteInfo.username===t.$route.params.username?s("div",{staticClass:"el-icon-edit",staticStyle:{color:"white",cursor:"pointer"},on:{click:t.renameClick}}):t._e(),s("div",{staticStyle:{width:"10%"}}),s("div",{staticClass:"button-wrap",staticStyle:{"margin-left":"25%"}},[s("el-button",{staticClass:"button1",attrs:{icon:"el-icon-success"},on:{click:t.titleClick}},[t._v(t._s(t.websiteInfo.title))])],1)]),s("div",{staticStyle:{display:"flex"}},[s("div",{staticClass:"slogan"},[t._v(t._s(t.websiteInfo.slogan))]),t.$store.state.websiteInfo.username===t.$route.params.username?s("div",{staticClass:"el-icon-edit",staticStyle:{color:"white",cursor:"pointer"},on:{click:t.sloganClick}}):t._e()]),s("div",[t._l(t.websiteInfo.quanzi,(function(e){return s("div",{directives:[{name:"show",rawName:"v-show",value:t.removeQuanzi,expression:"removeQuanzi"}],staticClass:"qz"},[s("el-tag",{class:{deleting:t.removeQuanzi},attrs:{closable:"",type:"info"},on:{close:function(s){return t.handleTagClose(e)}}},[t._v(t._s(e.name))])],1)})),t._l(t.websiteInfo.quanzi,(function(e){return s("div",{directives:[{name:"show",rawName:"v-show",value:!t.removeQuanzi,expression:"!removeQuanzi"}],staticClass:"qz",on:{click:function(t){e.dialogVisible=!0}}},[s("el-tag",{attrs:{type:"info"}},[t._v(t._s(e.name))])],1)})),s("div",{staticClass:"button-wrap"},["导师"===t.websiteInfo.title&&t.$store.state.username===t.websiteInfo.username?s("el-button",{staticClass:"button1",class:{deleting:t.removeQuanzi},attrs:{size:"mini",icon:"el-icon-remove"},on:{click:function(e){t.removeQuanzi=!t.removeQuanzi}}},[t._v("删除圈子")]):t._e(),"导师"===t.websiteInfo.title&&t.$store.state.username===t.websiteInfo.username?s("el-button",{staticClass:"button1",attrs:{size:"mini",icon:"el-icon-circle-plus"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("创建圈子")]):t._e()],1)],2)])],1),s("div",{staticClass:"choose"},t._l(t.category,(function(e,i){return s("div",{staticClass:"choose-button-wrap"},[t.$store.state.username===t.$route.params.username||"动态"===e.name?s("el-button",{class:{active:e.isActive},attrs:{type:"text"},on:{click:function(e){return t.handleClick(i)}}},[t._v(t._s(e.name))]):t._e()],1)})),0),s("div",{staticClass:"body"},[s("div",{staticClass:"body-left"},t._l(t.category,(function(e,i){return s("div",{staticClass:"content"},t._l(t.category[i].contents,(function(t){return s("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"item.isActive"}]},[s("el-card",[s("post",{key:t.id,attrs:{post:t}})],1)],1)})),0)})),0),s("el-dialog",{attrs:{title:"编辑头像",visible:t.picture.dialogVisible,"before-close":t.handleClose},on:{"update:visible":function(e){return t.$set(t.picture,"dialogVisible",e)}}},[s("span",[s("el-row",[s("input",{ref:"filElem",staticClass:"el-button hide",staticStyle:{"font-size":"15px","margin-bottom":"15px","margin-left":"0px"},attrs:{type:"file",id:"uploads",accept:"image/png, image/jpeg, image/gif, image/jpg"},on:{change:function(e){return t.uploadImg(e,1)}}}),s("div",{staticClass:"upload-img",on:{click:t.clickUpload}},[t._v("点击上传图片")])]),s("el-row",[s("el-col",{attrs:{span:14}},[s("vueCropper",{ref:"cropper",staticStyle:{width:"100%",height:"300px"},attrs:{img:t.picture.attach.customaryUrl,autoCrop:t.picture.options.autoCrop,fixedBox:t.picture.options.fixedBox,canMoveBox:t.picture.options.canMoveBox,autoCropWidth:t.picture.options.autoCropWidth,autoCropHeight:t.picture.options.autoCropHeight,centerBox:t.picture.options.centerBox},on:{realTime:t.realTime}})],1),s("el-col",{attrs:{span:6.5}},[s("h2",{staticClass:" mar-left-50",attrs:{align:"center"}},[t._v("头像预览")]),s("div",{staticClass:"show-preview"},[s("div",{staticClass:"preview",style:t.picture.previews.div},[s("img",{style:t.picture.previews.img,attrs:{src:t.picture.previews.url,width:"100%"}})])])])],1),s("el-row",{staticClass:"footerBtn",attrs:{align:"center"}},[s("el-button",{attrs:{type:"primary ",size:"medium",round:""},on:{click:function(e){return t.confirm("blob")}}},[t._v("确认")]),s("el-button",{attrs:{type:"info",size:"medium",round:""},on:{click:t.handleClose}},[t._v("取消")])],1)],1)]),t._l(t.websiteInfo.quanzi,(function(e){return s("div",[s("el-dialog",{attrs:{title:"圈子信息",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(s){return t.$set(e,"dialogVisible",s)}}},[s("span",[t._v(t._s(e.name))]),s("span",[t._v("还应该包括导师信息，圈内同学等信息")]),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[t._v("确 定")])],1)])],1)})),s("el-dialog",{attrs:{title:"新建圈子",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[s("el-form",{attrs:{model:t.quanzi}},[s("el-form-item",{attrs:{label:"圈子名称","label-width":t.formLabelWidth}},[s("el-input",{attrs:{"auto-complete":"off"},model:{value:t.quanzi.name,callback:function(e){t.$set(t.quanzi,"name",e)},expression:"quanzi.name"}})],1),s("el-form-item",{attrs:{label:"圈子描述","label-width":t.formLabelWidth}},[s("el-input",{attrs:{"auto-complete":"off"},model:{value:t.quanzi.description,callback:function(e){t.$set(t.quanzi,"description",e)},expression:"quanzi.description"}})],1),s("el-form-item",{attrs:{label:"添加学生","label-width":t.formLabelWidth}},[t._l(t.quanzi.dynamicTags,(function(e){return s("el-tag",{key:e,attrs:{closable:"","disable-transitions":!1},on:{close:function(s){return t.handleTagClose(e)}}},[t._v(" "+t._s(e)+" ")])})),t.quanzi.inputVisible?s("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(e)}},model:{value:t.quanzi.inputValue,callback:function(e){t.$set(t.quanzi,"inputValue",e)},expression:"quanzi.inputValue"}}):s("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+ 学生")])],2)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.commitNewQuanzi(t.quanzi.name)}}},[t._v("确 定")])],1)],1)],2)])},a=[],o=(s("c975"),s("a434"),s("365c"),s("62d3")),n={name:"PersonalCenter1",components:{post:o["a"]},data:function(){return{websiteInfo:{},picture:{dialogVisible:!1,options:{autoCrop:!0,fixedBox:!0,canMoveBox:!1,centerBox:!1,autoCropWidth:200,autoCropHeight:200},previews:{},attach:{id:"",userId:"",customaryUrl:"",laterUrl:"",attachType:"photo"}},category:[{name:"动态",contents:[],isActive:!0},{name:"我的收藏",contents:[],isActive:!1}],showIndex:0,bg:s("101e"),dialogFormVisible:!1,quanzi:{dynamicTags:[],inputVisible:!1,inputValue:"",name:"",description:"",dialogVisible:!1},formLabelWidth:"120px",removeQuanzi:!1,currentPage:1,hasNextPage:!1}},methods:{getPersonInfo:function(){var t=this;if(this.$store.state.hasLogin&&this.$store.state.websiteInfo.username===this.$route.params.username){var e=this;e.$axios({method:"post",url:"api/user/getUserInfo/",data:{token:sessionStorage.getItem("Authorization")}}).then((function(t){e.websiteInfo=t.data.data}))}else if(this.$store.state.hasLogin){var s=this;s.$axios({method:"post",url:"api/user/getUserInfoByName/",data:{username:s.$route.params.username}}).then((function(t){switch(t.data.status){case-1:s.$Notice.open({title:"用户不存在"}),s.$router.push({path:"/"},(function(t){}),(function(t){}));break;case 1:s.websiteInfo=t.data.data;break}}))}else this.$store.dispatch("getSiteInfo0").then((function(e){t.websiteInfo=e}))},handleTagClose:function(t){this.websiteInfo.quanzi.splice(this.websiteInfo.quanzi.indexOf(t),1),this.commitDeleteQuanzi()},showInput:function(){var t=this;this.quanzi.inputVisible=!0,this.$nextTick((function(e){t.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var t=this.quanzi.inputValue;t&&this.quanzi.dynamicTags.push(t),this.quanzi.inputVisible=!1,this.quanzi.inputValue=""},fetchList0:function(){var t=this;t.$axios({url:"api/articleTag/getUsernameArticle/",method:"post",data:{username:t.$route.params.username}}).then((function(e){t.category[0].contents=e.data.data||[]})).catch((function(t){console.log(t)}))},fetchList1:function(){var t=this;t.$axios({url:"api/articleTag/getUsernameArticle/",method:"post",data:{username:t.$route.params.username}}).then((function(e){t.category[1].contents=e.data.data||[]})).catch((function(t){console.log(t)}))},handleClose:function(t){this.picture.dialogVisible=!1},handleQZInfoClose:function(t){t.dialogVisible=!1},handleClick:function(t){var e=t?0:1;this.category[e].isActive=!1,this.category[t].isActive=!0},titleClick:function(){"学生"===this.websiteInfo.title?this.$message("学生认证，有加入和退出圈子的权限"):"导师"===this.websiteInfo.title&&this.$message("导师认证，有创建和删除圈子的权限")},renameClick:function(){console.log("rename!!!");var t=this;t.$prompt("请输入您想更改的昵称","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(e){var s=e.value;""===s||null===s?t.$message({type:"error",message:"输入不能为空"}):t.$axios({url:"api/user/setUserName/",method:"post",data:{token:sessionStorage.getItem("Authorization"),username:s}}).then((function(e){switch(e.data.status){case 1:t.$store.commit("SET_SITE_INFO",e.data.data),sessionStorage.setItem("siteInfo",JSON.stringify(e.data.data)),t.$message({type:"success",message:"你的昵称已更改为"+s}),t.websiteInfo=t.$store.state.websiteInfo,t.$router.push({path:"/personalCenter/"+t.websiteInfo.username});break;case-1:t.$message({type:"error",message:"请登录"}),t.$router.push({path:"/login"},(function(t){}),(function(t){}));break;case-2:t.$message({type:"error",message:"用户名已存在"});break;case-3:t.$message({type:"error",message:"游客账号禁止修改姓名"});break}})).catch((function(t){console.log(t)}))})).catch((function(){t.$message({type:"info",message:"取消输入"})}))},created:function(){this.getPersonInfo(),this.fetchList0(),this.fetchList1()},sloganClick:function(){var t=this;console.log("slogan!!!");var e=this;e.$prompt("请输入您想更改的个性签名","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(t){var s=t.value;""===s||null===s?e.$message({type:"error",message:"输入不能为空"}):e.$axios({url:"api/user/setUserSlogan/",method:"post",data:{token:sessionStorage.getItem("Authorization"),slogan:s}}).then((function(t){switch(t.data.status){case 1:e.$store.commit("SET_SITE_INFO",t.data.data),sessionStorage.setItem("siteInfo",JSON.stringify(t.data.data)),e.$message({type:"success",message:"你的签名已更改为"+s}),e.websiteInfo=e.$store.state.websiteInfo,e.$router.push({path:"/personalCenter/"+e.websiteInfo.username});break;case-1:e.$message({type:"error",message:"请登录"}),e.$router.push({path:"/login"},(function(t){}),(function(t){}));break;case-3:e.$message({type:"error",message:"游客账号禁止修改签名"});break}})).catch((function(t){console.log(t)}))})).catch((function(){t.$message({type:"info",message:"取消输入"})}))},realTime:function(t){this.picture.previews=t},clickUpload:function(){this.$refs.filElem.dispatchEvent(new MouseEvent("click"))},uploadImg:function(t,e){var s=this,i=t.target.files[0];if(!/\.(gif|jpg|jpeg|png|bmp|GIF|JPG|PNG)$/.test(t.target.value))return this.$message.error("图片类型必须是.gif,jpeg,jpg,png,bmp中的一种"),!1;var a=new FileReader;a.readAsDataURL(i),a.onload=function(t){var e=t.target.result;s.picture.attach.customaryUrl=e}},confirm:function(t){var e=this;e.$refs.cropper.getCropData((function(t){""===t||null===t?e.$message({type:"error",message:"输入不能为空"}):(e.$axios({url:"api/user/setUserAvatar/",method:"post",data:{token:sessionStorage.getItem("Authorization"),avatarBase64:t}}).then((function(t){switch(t.data.status){case 1:e.$store.commit("SET_SITE_INFO",t.data.data),sessionStorage.setItem("siteInfo",JSON.stringify(t.data.data)),e.$message({type:"success",message:"你的头像已更改"}),e.websiteInfo=e.$store.state.websiteInfo,e.$router.push({path:"/personalCenter/"+e.websiteInfo.username});break;case-1:e.$message({type:"error",message:"请登录"}),e.$router.push({path:"/login"},(function(t){}),(function(t){}));break;case-3:e.$message({type:"error",message:"游客账号禁止修改头像"});break}})).catch((function(t){console.log(t)})),console.log(t))}))},commitNewQuanzi:function(t){this.websiteInfo.quanzi.push({name:t}),console.log(this.websiteInfo.quanzi),this.dialogFormVisible=!1},commitDeleteQuanzi:function(){console.log(this.websiteInfo.quanzi)}},watch:{"$store.state.hasLogin":function(){this.getWebSiteInfo()},"$route.params":function(){this.getPersonInfo(),this.fetchList0(),this.fetchList1()}},mounted:function(){this.getPersonInfo(),this.fetchList0(),this.fetchList1()}},r=n,c=(s("f637"),s("0c7c")),l=Object(c["a"])(r,i,a,!1,null,"f064b786",null);e["default"]=l.exports},"101e":function(t,e,s){t.exports=s.p+"static/img/bg2.70d69bbd.jpg"},3476:function(t,e,s){"use strict";s("5be2")},"5be2":function(t,e,s){},"62d3":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("article",{staticClass:"post post-list"},[s("div",{staticClass:"post-entry"},[s("div",{staticClass:"feature"},[s("router-link",{attrs:{to:"/article/"+t.post.id}},[s("img",{attrs:{src:t.post.banner}})])],1),s("h1",{staticClass:"entry-title"},[s("router-link",{attrs:{to:"/article/"+t.post.id}},[t.post.isTop?s("span",{staticStyle:{color:"#ff6d6d","font-weight":"600"}},[t._v("[置顶] ")]):t._e(),t._v(t._s(t.post.title))])],1),s("div",{staticClass:"p-time"},[s("i",{staticClass:"iconfont iconmeditor-time"}),t._v(" "+t._s(t._f("parseTime")(t.post.pubTime))),t.post.isHot?s("i",{staticClass:"iconfont iconfire",staticStyle:{"margin-left":"5px",color:"#ff6d6d"}}):t._e()]),s("p",{staticClass:"summary"},[t._v(t._s(t.post.summary))]),s("footer",{staticClass:"entry-footer"},[s("div",{staticClass:"post-more"},[s("router-link",{attrs:{to:"/article/"+t.post.id}},[s("i",{staticClass:"iconfont iconfish-li",staticStyle:{"font-size":"25px"}})])],1),s("div",{staticClass:"info-meta"},[s("div",{staticClass:"comnum"},[s("span",[s("i",{staticClass:"iconfont iconcomment"}),s("router-link",{attrs:{to:"/article/"+t.post.id}},[t._v(t._s(t.post.commentsCount)+" 条评论")]),t._v("> ")],1)]),s("div",{staticClass:"views"},[s("span",{staticStyle:{color:"red"}},[s("i",{staticClass:"iconfont iconeyes"}),t._v(t._s(t.post.viewsCount)+" 热度")])])])])]),s("hr")])},a=[],o={name:"post",props:{post:{type:Object}}},n=o,r=(s("3476"),s("0c7c")),c=Object(r["a"])(n,i,a,!1,null,"a9069538",null);e["a"]=c.exports},a434:function(t,e,s){"use strict";var i=s("23e7"),a=s("23cb"),o=s("a691"),n=s("50c4"),r=s("7b0b"),c=s("65f0"),l=s("8418"),u=s("1dde"),p=s("ae40"),f=u("splice"),m=p("splice",{ACCESSORS:!0,0:0,1:2}),d=Math.max,h=Math.min,g=9007199254740991,v="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!f||!m},{splice:function(t,e){var s,i,u,p,f,m,b=r(this),w=n(b.length),C=a(t,w),y=arguments.length;if(0===y?s=i=0:1===y?(s=0,i=w-C):(s=y-2,i=h(d(o(e),0),w-C)),w+s-i>g)throw TypeError(v);for(u=c(b,i),p=0;p<i;p++)f=C+p,f in b&&l(u,p,b[f]);if(u.length=i,s<i){for(p=C;p<w-i;p++)f=p+i,m=p+s,f in b?b[m]=b[f]:delete b[m];for(p=w;p>w-i+s;p--)delete b[p-1]}else if(s>i)for(p=w-i;p>C;p--)f=p+i-1,m=p+s-1,f in b?b[m]=b[f]:delete b[m];for(p=0;p<s;p++)b[p+C]=arguments[p+2];return b.length=w-i+s,u}})},d582:function(t,e,s){},f637:function(t,e,s){"use strict";s("d582")}}]);
//# sourceMappingURL=chunk-41594d54.9df8923a.js.map